<!DOCTYPE html>
<html lang="en-GB" > 
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<title>ISS</title>

		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
		<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
		<meta name="author" content="FREEHTML5.CO" />

	
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
		<link rel="shortcut icon" href="favicon.ico">

		<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
		
		<!-- Animate.css -->
		<link rel="stylesheet" href="css/animate.css">

		<!-- Icomoon Icon Fonts-->
		<link rel="stylesheet" href="css/icomoon.css">

		<!-- Simple Line Icons -->
		<link rel="stylesheet" href="css/simple-line-icons.css">

		<!-- Magnific Popup -->
		<link rel="stylesheet" href="css/magnific-popup.css">

		<!-- Bootstrap  -->
		<link rel="stylesheet" href="css/bootstrap.css">

		<link rel="stylesheet" href="css/style.css">

		<script src="js/modernizr-2.6.2.min.js"></script>
	</head>
	<body>
		<header  id="fh5co-header">
			<div class="container">
				<!-- <div class="row"> -->
				<nav class="navbar navbar-default">
					<div class="navbar-header">
						<!-- Mobile Toggle Menu Button -->
						<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false"><i></i></a>
						<a class="navbar-brand" href="index.html">Instrumentations Salles Systèmes</a> 
					</div>
				</nav>
			</div>
		</header>
		<section id="fh5co-work" data-section="work">
			<div class="container">
				<div class="row">
					<div class=" text-center">
						<form>
							<h2>
								<select class="systeme" id="systeme" name="systeme" >
									<option value="as1" id="p1">Panneau Solaire 1</option>
									<option value="as2" id="p2">Panneau Solaire 2</option>
								</select>
							</h2>	
						</form>
						<div class="row">
							<div class="col-md-8 col-md-offset-2 subtext to-animate" id="bloc">
								<div>
									<!--Panneau-->
									<div class="sys">
										<h3>Inclinaison :<span id="Inclinaison"></span>°</h3>
										<svg height="170" width="280">
											<line id="line" x1="50" y1="100" x2="200" y2="100" transform="rotate(0)" style="stroke:rgb(255,0,0); stroke-width:5 ;transform-origin: 150px 100px" />
											<line x1="125" y1="150" x2="150" y2="100" style="stroke:rgb(0,0,0); stroke-width:3" />
											<line x1="175" y1="150" x2="150" y2="100" style="stroke:rgb(0,0,0); stroke-width:3" />
											<circle cx="150" cy="100" r="3" stroke="black" stroke-width="3" fill="red" />
											<rect x="10" y="0" width="250" height="150" style="fill:none;stroke-width:3;stroke:rgb(0,0,0)" />
										</svg>
									</div>
									<!--boussole-->
									<div class="sys">
										<h3>Orientation : <span id="Orientation"></span>°</h3>
										<svg height="170" width="140" >
											<text x="60" y="13" fill="red">N</text>
											<circle cx="65" cy="80" r="60" stroke="black" stroke-width="5" fill="none" />
											<g id="BR" style="transform-origin: 65px 80px">
												<polygon points="65,40 40,80 90,80 " style="fill:darkred;stroke:black;stroke-width:1" transform="rotate(0)" />
												<polygon points="65,120 40,80 90,80 " style="fill:cyan;stroke:black;stroke-width:1"  transform="rotate(0)"/>
											</g>
										</svg>
									</div>
									<h3>Consommation</h3>
									<svg width="250" height="170">
										<!--base-->
										<g>
											<rect rx="20" ry="20" width="250" height="170" stroke="black" stroke-width="2"  fill="#494949" />
										</g>
										<!--Ecran courant consommé-->
										<g >
											<rect id="screen" x="25" y="70" rx="20" ry="20" width="200" height="50" stroke=" white" stroke-width="3"  fill="white" />
											<text id="val1" x="50" y="105" fill="black" font-size="2em"></text>
											<text id="uni" x="150" y="105" fill="black" font-size="2em">mA</text>
										</g>
									</svg>
								</div>
								<input id="BP" class="BpHisto" type="button" value="Historique" onclick='loadHisto()' >
								<div class="row" id="historique"></div>
							</div>
						</div>
					</div>
						<a   href="index.html" >
							<img src="images/fleche.png"   alt=" height='55'">
						</a>
				</div>
			</div>				
		</section>
		<footer id="footer">
			<a href="#" class="gotop js-gotop"><i class="icon-arrow-up2"></i></a>
			<div class="container">
				<div>
					<div class="col-md-12 text-center">
						<p>Created by <a href="http://stssnsb.free.fr/" target="_blank">BTS SN Sembat</a></p>	
					</div>
				</div>
			</div>
		</footer>

		<!-- jQuery -->
		<script src="js/jquery.min.js"></script>
		
		<!-- jQuery Easing -->
		<script src="js/jquery.easing.1.3.js"></script>
		
		<!-- Bootstrap -->
		<script src="js/bootstrap.min.js"></script>
		
		<!-- Waypoints -->
		<script src="js/jquery.waypoints.min.js"></script>
		
		<!-- Stellar Parallax -->
		<script src="js/jquery.stellar.min.js"></script>
		
		<!-- Counter -->
		<script src="js/jquery.countTo.js"></script>
		
		<!-- Magnific Popup -->
		<script src="js/jquery.magnific-popup.min.js"></script>
		<script src="js/magnific-popup-options.js"></script>

		<!-- Main JS (Do not remove) -->
		<script src="js/main.js"></script>

		<!--Scripte getion des données -->			
		<script>
		//////////////////////////////////////////////charger les données
		function loadData(nb,AS,localisation) {
		const xhttp = new XMLHttpRequest();
		xhttp.onload = function() {
			//document.getElementById("demo").innerHTML = this.responseText;
			var test = this.responseText;
			//var tab = JSON.parse(test);
			var tab = test.split(' ');
			document.getElementById(localisation).innerHTML = tab[nb];
		}
		xhttp.open("GET", "./"+AS+"-data.php");
		xhttp.send();
		}
		//historique
		function loadHisto()
				{
					var systeme = document.getElementById("systeme").value;
					var x = document.getElementById("historique").innerHTML;
					if(x ==""){
							x = $('#historique').load(''+systeme+'-historique.php').fadeIn("slow");
					}else{
						document.getElementById("historique").innerHTML = "";
						x = "";
					}	
				}
		//mise à jour des donées/////////////////////////////////////////////////
		(function loop(){
			setTimeout(function() {
				
				//choix du systeme
				var x = document.getElementById("systeme").value;
				loadData(1,x,'Inclinaison');
				loadData(2,x,'Orientation');
				loadData(3,x,'val1');

				//mouvement
				var incli = document.getElementById("Inclinaison").textContent;
				var orien= document.getElementById("Orientation").textContent;
				document.getElementById("line").style.transform= 'rotate('+incli+'deg)';
				document.getElementById("BR").style.transform='rotate('+orien+'deg)';
				loop();
			}, 1000);
		})();
		</script>
	</body>
</html>
